---
title: "Wraping around ggplot2"
author: "Elio Campitelli"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r}
library(ggperiodic)
library(ggplot2)
x <- seq(0, 360 - 10, by = 10)*pi/180
y <- seq(0, 360 - 10, by = 10)*pi/180

z <- outer(1.2*sin(x), 0.4*sin(y*2)) +
  outer(0.5*cos(2*x), -0.5*sin(3*y)) +
  outer(0.2*sin(4*x), 0.45*cos(2*x))

dimnames(z) <- list(x = x*180/pi, y = y*180/pi)

Z <- reshape2::melt(z, value.name = "z")

Z <- periodic(Z, x = c(0, 360), y = c(0, 360))

ggplot(Z, aes(x, y, z = z, color = ..level..), 
       x = c(-180, 360), y = c(-180, 720)) +
  geom_contour() 
```


